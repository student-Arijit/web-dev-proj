<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Prabhu Jagatbandhu College(CMSM)</title>
    <link rel="icon" href="https://pjc.ac.in/images/Prabhu-Jagatbandhu-College-Logo.png">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
    <link rel="stylesheet" href="css/style.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/pdf-lib/1.17.1/pdf-lib.min.js"></script>
    <script src="https://unpkg.com/pdf-lib@1.17.1"></script>

</head>
<body>
    <div class="main-body">
        <section class="top-area">
            <div class="dept-name">
                <h4 class="dept">
                    Department of Computer Science
                </h4>
            </div>
            <div class="dept-name webmail">
                <ul class="list">
                    <li>
                        <i class="fa fa-envelope color" aria-hidden="true"></i>
                        <p class="dept">Webmail</p>
                    </li>
                    <li>
                        <i class="fa fa-phone color" aria-hidden="true"></i>
                        <p class="dept">2669&nbsp;0221</p>
                    </li>
                    <li>
                        <i class="fa fa-envelope color" aria-hidden="true"></i>
                        <p class="dept">prabhujagatbandhucollege2019@gmail.com</p>
                    </li>
                </ul>
            </div>
        </section>
        <hr>
        <header>
            <div class="container inline">
                <div class="logo-area">
                    <div class="logo">
                        <img src="https://pjc.ac.in/images/Prabhu-Jagatbandhu-College-Logo.png" alt="Prabhu-Jagatbandhu-College-Logo">
                    </div>
                </div>
                <div class="college-name-area inline">
                    <h1>Prabhu Jagatbandhu College</h1>
                    <h3 class="under-address">Affiliated to the University of Calcutta</h3>
                    <h3 class="under-address">Jhorehat, Andul-Mouri, Howrah, West Bengal, India</h3>
                </div>
            </div>
        </header>
        <hr class="width-border">
        <nav>
            <ul class="navbar">
                <li><a href="index.html">Home</a></li>
                <li class="dropdown">
                    <a href="#">Administration</a>
                    <ul class="dropdown-content">
                        <li><a href="#">Administrative Hierarchy</a></li>
                        <li><a href="#">Governing Body</a></li>
                        <li><a href="#">Principal</a></li>
                        <li><a href="#">IQAC</a></li>
                        <li><a href="#">Teachers' Council</a></li>
                        <li><a href="#">Library Administration</a></li>
                        <li><a href="#">Cells</a></li>
                        <li><a href="#">Committees</a></li>
                        <li><a href="#">Office Staff</a></li>
                    </ul>
                </li>
                <li><a href="#">Academics</a></li>
                <li><a href="#">Cover-Page</a></li>
                <li><a href="#">Facilities</a></li>
                <li><a href="#">Library</a></li>
                <li><a href="#">Activities</a></li>
                <li><a href="#">Contact Us</a></li>
                <li class="dropdown">
                    <a href="#">Assignment</a>
                    <ul class="dropdown-content">
                        <li><a href="assignment11st.html">1st sem</a></li>
                        <li><a href="assignment2nd.html">2nd sem</a></li>
                    </ul>
                </li>
            </ul>
            <div class="hamburger-menu">
                <i class="fas fa-bars"></i>
            </div>
            <script>
                document.addEventListener('DOMContentLoaded', function() {
                    const hamburger = document.querySelector('.hamburger-menu');
                    const icon = hamburger.querySelector('i');
                    const navbar = document.querySelector('.navbar');
        
                    hamburger.addEventListener('click', function() {
                        navbar.classList.toggle('active');
                        if (navbar.classList.contains('active')) {
                            icon.classList.remove('fa-bars');
                            icon.classList.add('fa-times');
                        } else {
                            icon.classList.remove('fa-times');
                            icon.classList.add('fa-bars');
                        }
                    });
                });
            </script>
        </nav>
        <h1>Enter Your Details</h1>
    <form id="pdfForm">
        <label for="rollno">C.U. Roll No:</label>
        <input type="text" id="rollno" name="rollno" required><br><br>

        <label for="regno">C.U. Registration No:</label>
        <input type="text" id="regno" name="regno" required><br><br>

        <input type="submit" value="Generate PDF">
    </form>

    <script>
        document.getElementById('pdfForm').addEventListener('submit', async function (e) {
    e.preventDefault();

    try {
        // Get user input
        const rollno = document.getElementById('rollno').value;
        const regno = document.getElementById('regno').value;

        // Create a new PDF document
        const { PDFDocument, rgb } = PDFLib;
        const pdfDoc = await PDFDocument.create();

        // Add a page to the PDF
        const page = pdfDoc.addPage([600, 800]);

        // Load and embed the background image
        const imageUrl = 'https://jin6oq.sn.files.1drv.com/y4mOoK29SnnXrMtWtDssHWa4uBEP-0it4OmxyH8CPYgqqahLW_I0Cbi8g35Z5LGwnveeW0qps-Oiltm5SdYaAd5urLWm3LaAaB7rCKTzYQHSRh0GZinSYybT3S7azFJFbyVrKibIViyXv0xCErVHXiIXKpku6P8wqmjOb2Kv5KIojxR5bLVYRv4FYyDHbnZdstdpWnEovhg8LqvIWcjbPYCIUdX_-xSZqNjMruKlhD4J3Y'; // Background image URL
        const imageBytes = await fetch(imageUrl)
            .then(res => res.arrayBuffer())
            .catch(err => { throw new Error('Failed to load image. Check the URL or CORS policy.'); });
        
        // Embed the image based on the type
        const backgroundImage = await pdfDoc.embedJpg(imageBytes); // Ensure your image is JPG, or change to embedPng() if PNG
        
        // Get the width and height of the image
        const { width, height } = backgroundImage.scale(1);

        // Draw the background image on the entire page
        page.drawImage(backgroundImage, {
            x: 0,
            y: 0,
            width: page.getWidth(),
            height: page.getHeight(),
        });

        // Set font and size
        const fontSize = 24;
        const textColor = rgb(1, 1, 1);

        // Draw text on top of the background image
        page.drawText('University of Calcutta', { x: 150, y: 700, size: fontSize + 8, color: textColor });
        page.drawText('B.Sc Honours Semester-1', { x: 150, y: 650, size: fontSize, color: textColor });
        page.drawText(`C.U. Roll No: ${rollno}`, { x: 150, y: 600, size: fontSize, color: textColor });
        page.drawText(`C.U. Registration No: ${regno}`, { x: 150, y: 550, size: fontSize, color: textColor });
        page.drawText('Subject: C.M.S.A', { x: 150, y: 500, size: fontSize, color: textColor });
        page.drawText('Paper Code: DSC/CC1/P', { x: 150, y: 450, size: fontSize, color: textColor });

        // Save the PDF and trigger the download
        const pdfBytes = await pdfDoc.save();

        // Trigger the browser to download the PDF
        const blob = new Blob([pdfBytes], { type: 'application/pdf' });
        const link = document.createElement('a');
        link.href = URL.createObjectURL(blob);
        link.download = `custom_certificate_${rollno}.pdf`;
        link.click();

    } catch (error) {
        console.error('An error occurred:', error.message);
        alert('An error occurred while generating the PDF: ' + error.message);
    }
});
    </script>
        
    </div>
    <script type="module" src="https://unpkg.com/ionicons@7.1.0/dist/ionicons/ionicons.esm.js"></script>
    <script nomodule src="https://unpkg.com/ionicons@7.1.0/dist/ionicons/ionicons.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.bundle.min.js" integrity="sha384-MrcW6ZMFYlzcLA8Nl+NtUVF0sA7MsXsP1UyJoMp4YLEuNSfAP+JcXn/tWtIaxVXM" crossorigin="anonymous"></script>
</body>
</html>